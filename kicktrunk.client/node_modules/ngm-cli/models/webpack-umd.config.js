"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const webpack = require("webpack");
const TsConfigPathsPlugin = require('awesome-typescript-loader').TsConfigPathsPlugin;
function getWebpackConfig(config) {
    return {
        devtool: 'source-map',
        resolve: {
            extensions: ['.ts', '.js']
        },
        entry: config.entry,
        output: {
            path: config.output,
            publicPath: '/',
            filename: `${config.name}.js`,
            libraryTarget: 'umd',
            library: config.name
        },
        // require those dependencies but don't bundle them
        externals: [/^\@angular\//, /^rxjs\//],
        module: {
            rules: [
                {
                    test: /\.ts$/,
                    loader: `awesome-typescript-loader`,
                    exclude: [/\.e2e\.ts$/],
                    query: {
                        compilerOptions: {
                            declaration: false
                        },
                        configFileName: config.tsconfig
                    }
                },
                // in main, load css as raw text
                {
                    // exclude: styles,
                    test: /\.css$/,
                    loaders: ['raw-loader', 'postcss-loader']
                }, {
                    // exclude: styles,
                    test: /\.styl$/,
                    loaders: ['raw-loader', 'postcss-loader', 'stylus-loader']
                },
                {
                    // exclude: styles,
                    test: /\.less$/,
                    loaders: ['raw-loader', 'postcss-loader', 'less-loader']
                }, {
                    // exclude: styles,
                    test: /\.scss$|\.sass$/,
                    loaders: ['raw-loader', 'postcss-loader', 'sass-loader']
                }
            ]
        },
        plugins: [
            new TsConfigPathsPlugin(),
            // fix the warning in ./~/@angular/core/src/linker/system_js_ng_module_factory_loader.js
            new webpack.ContextReplacementPlugin(/angular(\\|\/)core(\\|\/)(esm(\\|\/)src|src)(\\|\/)linker/, config.root)
        ],
        // Hide webpack output because its noisy.
        // noInfo: true,
        // Also prevent chunk and module display output, cleaner look. Only emit errors.
        stats: 'errors-only',
        devServer: {
            stats: 'errors-only'
        },
    };
}
exports.getWebpackConfig = getWebpackConfig;
;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2VicGFjay11bWQuY29uZmlnLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL25nbS9tb2RlbHMvd2VicGFjay11bWQuY29uZmlnLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsbUNBQW9DO0FBQ3BDLE1BQU8sbUJBQW1CLEdBQUcsT0FBTyxDQUFDLDJCQUEyQixDQUFDLENBQUMsbUJBQW1CLENBQUM7QUFFdEYsMEJBQWlDLE1BQU07SUFDckMsTUFBTSxDQUFDO1FBQ0wsT0FBTyxFQUFFLFlBQVk7UUFFckIsT0FBTyxFQUFFO1lBQ1AsVUFBVSxFQUFFLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQztTQUMzQjtRQUVELEtBQUssRUFBRSxNQUFNLENBQUMsS0FBSztRQUVuQixNQUFNLEVBQUU7WUFDTixJQUFJLEVBQUUsTUFBTSxDQUFDLE1BQU07WUFDbkIsVUFBVSxFQUFFLEdBQUc7WUFDZixRQUFRLEVBQUUsR0FBRyxNQUFNLENBQUMsSUFBSSxLQUFLO1lBQzdCLGFBQWEsRUFBRSxLQUFLO1lBQ3BCLE9BQU8sRUFBRSxNQUFNLENBQUMsSUFBSTtTQUNyQjtRQUVELG1EQUFtRDtRQUNuRCxTQUFTLEVBQUUsQ0FBQyxjQUFjLEVBQUUsU0FBUyxDQUFDO1FBRXRDLE1BQU0sRUFBRTtZQUNOLEtBQUssRUFBRTtnQkFDTDtvQkFDRSxJQUFJLEVBQUUsT0FBTztvQkFDYixNQUFNLEVBQUUsMkJBQTJCO29CQUNuQyxPQUFPLEVBQUUsQ0FBQyxZQUFZLENBQUM7b0JBQ3ZCLEtBQUssRUFBRTt3QkFDTCxlQUFlLEVBQUU7NEJBQ2YsV0FBVyxFQUFFLEtBQUs7eUJBQ25CO3dCQUNELGNBQWMsRUFBRSxNQUFNLENBQUMsUUFBUTtxQkFDaEM7aUJBQ0Y7Z0JBQ0QsZ0NBQWdDO2dCQUNoQztvQkFDRSxtQkFBbUI7b0JBQ25CLElBQUksRUFBRSxRQUFRO29CQUNkLE9BQU8sRUFBRSxDQUFDLFlBQVksRUFBRSxnQkFBZ0IsQ0FBQztpQkFDMUMsRUFBRTtvQkFDRCxtQkFBbUI7b0JBQ25CLElBQUksRUFBRSxTQUFTO29CQUNmLE9BQU8sRUFBRSxDQUFDLFlBQVksRUFBRSxnQkFBZ0IsRUFBRSxlQUFlLENBQUM7aUJBQzNEO2dCQUNEO29CQUNFLG1CQUFtQjtvQkFDbkIsSUFBSSxFQUFFLFNBQVM7b0JBQ2YsT0FBTyxFQUFFLENBQUMsWUFBWSxFQUFFLGdCQUFnQixFQUFFLGFBQWEsQ0FBQztpQkFDekQsRUFBRTtvQkFDRCxtQkFBbUI7b0JBQ25CLElBQUksRUFBRSxpQkFBaUI7b0JBQ3ZCLE9BQU8sRUFBRSxDQUFDLFlBQVksRUFBRSxnQkFBZ0IsRUFBRSxhQUFhLENBQUM7aUJBQ3pEO2FBQ0Y7U0FDRjtRQUVELE9BQU8sRUFBRTtZQUNQLElBQUksbUJBQW1CLEVBQUU7WUFDekIsd0ZBQXdGO1lBQ3hGLElBQUksT0FBTyxDQUFDLHdCQUF3QixDQUNsQywyREFBMkQsRUFDM0QsTUFBTSxDQUFDLElBQUksQ0FDWjtTQUNGO1FBQ0QseUNBQXlDO1FBQ3pDLGdCQUFnQjtRQUNoQixnRkFBZ0Y7UUFDaEYsS0FBSyxFQUFFLGFBQWE7UUFDcEIsU0FBUyxFQUFFO1lBQ1QsS0FBSyxFQUFFLGFBQWE7U0FDckI7S0FDRixDQUFDO0FBQ0osQ0FBQztBQXhFRCw0Q0F3RUM7QUFBQSxDQUFDIn0=